\hypertarget{classsm__dance__bot_1_1CbNavigateForward}{}\section{sm\+\_\+dance\+\_\+bot\+:\+:Cb\+Navigate\+Forward Class Reference}
\label{classsm__dance__bot_1_1CbNavigateForward}\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}


{\ttfamily \#include $<$cb\+\_\+navigate\+\_\+forward.\+h$>$}



Inheritance diagram for sm\+\_\+dance\+\_\+bot\+:\+:Cb\+Navigate\+Forward\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=242pt]{classsm__dance__bot_1_1CbNavigateForward__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for sm\+\_\+dance\+\_\+bot\+:\+:Cb\+Navigate\+Forward\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1CbNavigateForward__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsm__dance__bot_1_1CbNavigateForward_a36295d9123b7a8d60a97eb75cc21e342}{Cb\+Navigate\+Forward} (float \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forward\+Distance})
\item 
\hyperlink{classsm__dance__bot_1_1CbNavigateForward_a3bc7ae2a24f356af43f43743154425a7}{Cb\+Navigate\+Forward} ()
\item 
virtual void \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a8dd85c804a3d69587d0d6b7a1c4bc6a3}{on\+Entry} () override
\item 
virtual void \hyperlink{classsm__dance__bot_1_1CbNavigateForward_abd291ba77cd42537324eb9fbfc44cd22}{on\+Exit} () override
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forward\+Distance}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classsm__dance__bot_1_1CbNavigateForward_af6cff0d1fe09327ce56d35154cf0eb25}{forward\+Speed}
\item 
tf\+::\+Transform\+Listener \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7bda457757f10a2e71eb15c07bf707b4}{listener}
\item 
\hyperlink{classsmacc_1_1ClMoveBaseZ}{smacc\+::\+Cl\+Move\+BaseZ} $\ast$ \hyperlink{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}{move\+Base\+Client\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 12 of file cb\+\_\+navigate\+\_\+forward.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!Cb\+Navigate\+Forward@{Cb\+Navigate\+Forward}}
\index{Cb\+Navigate\+Forward@{Cb\+Navigate\+Forward}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{Cb\+Navigate\+Forward(float forward\+Distance)}{CbNavigateForward(float forwardDistance)}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::\+Cb\+Navigate\+Forward (
\begin{DoxyParamCaption}
\item[{float}]{forward\+Distance}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_a36295d9123b7a8d60a97eb75cc21e342}{}\label{classsm__dance__bot_1_1CbNavigateForward_a36295d9123b7a8d60a97eb75cc21e342}


Definition at line 24 of file cb\+\_\+navigate\+\_\+forward.\+h.



References forward\+Distance.


\begin{DoxyCode}
25     \{
26         this->\hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forwardDistance} = \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forwardDistance};
27     \}
\end{DoxyCode}
\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!Cb\+Navigate\+Forward@{Cb\+Navigate\+Forward}}
\index{Cb\+Navigate\+Forward@{Cb\+Navigate\+Forward}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{Cb\+Navigate\+Forward()}{CbNavigateForward()}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::\+Cb\+Navigate\+Forward (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_a3bc7ae2a24f356af43f43743154425a7}{}\label{classsm__dance__bot_1_1CbNavigateForward_a3bc7ae2a24f356af43f43743154425a7}


Definition at line 29 of file cb\+\_\+navigate\+\_\+forward.\+h.


\begin{DoxyCode}
30     \{
31     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!on\+Entry@{on\+Entry}}
\index{on\+Entry@{on\+Entry}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{on\+Entry() override}{onEntry() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::on\+Entry (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_a8dd85c804a3d69587d0d6b7a1c4bc6a3}{}\label{classsm__dance__bot_1_1CbNavigateForward_a8dd85c804a3d69587d0d6b7a1c4bc6a3}


Reimplemented from \hyperlink{classsmacc_1_1SmaccClientBehavior_a7962382f93987c720ad432fef55b123f}{smacc\+::\+Smacc\+Client\+Behavior}.



Definition at line 33 of file cb\+\_\+navigate\+\_\+forward.\+h.



References smacc\+::\+Smacc\+Client\+Behavior\+::current\+State, forward\+Distance, smacc\+::\+I\+Smacc\+State\+::param(), smacc\+::\+Cl\+Move\+Base\+Z\+::planner\+Switcher\+\_\+, odom\+\_\+tracker\+::\+R\+E\+C\+O\+R\+D\+\_\+\+P\+A\+T\+H\+\_\+\+F\+O\+R\+W\+A\+RD, smacc\+::\+Smacc\+Client\+Behavior\+::requires\+Client(), and smacc\+::\+Smacc\+Action\+Client\+Base$<$ Action\+Type $>$\+::send\+Goal().


\begin{DoxyCode}
34     \{
35         \textcolor{comment}{// straight motion distance}
36         \textcolor{keywordtype}{double} dist;
37 
38         \textcolor{keywordflow}{if} (!\hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forwardDistance})
39         \{
40             this->\hyperlink{classsmacc_1_1SmaccClientBehavior_af76fc9b877542ed5caf033f820c107d0}{currentState}->\hyperlink{classsmacc_1_1ISmaccState_a4982f2187ed6da337462721146e8ef70}{param}(\textcolor{stringliteral}{"straight\_motion\_distance"}, dist, 3.5);
41         \}
42         \textcolor{keywordflow}{else}
43         \{
44             dist = *\hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{forwardDistance};
45         \}
46 
47         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Straight motion distance: "} << dist);
48 
49         this->\hyperlink{classsmacc_1_1SmaccClientBehavior_a917f001e763a1059af337bf4e164f542}{requiresClient}(\hyperlink{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}{moveBaseClient\_});
50         \textcolor{keyword}{auto} odomTracker\_ = this->getComponent<odom\_tracker::OdomTracker>();
51 
52         \textcolor{comment}{//this should work better with a coroutine and await}
53         ros::Rate rate(10.0);
54         tf::StampedTransform currentPose;
55 
56         \textcolor{keywordflow}{while} (ros::ok())
57         \{
58             \textcolor{keywordflow}{try}
59             \{
60                 \hyperlink{classsm__dance__bot_1_1CbNavigateForward_a7bda457757f10a2e71eb15c07bf707b4}{listener}.lookupTransform(\textcolor{stringliteral}{"/odom"}, \textcolor{stringliteral}{"/base\_link"},
61                                          ros::Time(0), currentPose);
62 
63                 \textcolor{keywordflow}{break};
64             \}
65             \textcolor{keywordflow}{catch} (tf::TransformException ex)
66             \{
67                 ROS\_ERROR(\textcolor{stringliteral}{"%s"}, ex.what());
68                 ros::Duration(1.0).sleep();
69             \}
70         \}
71 
72         tf::Transform forwardDeltaTransform;
73         forwardDeltaTransform.setIdentity();
74         forwardDeltaTransform.setOrigin(tf::Vector3(dist, 0, 0));
75 
76         tf::Transform targetPose = currentPose * forwardDeltaTransform;
77 
78         smacc::ClMoveBaseZ::Goal goal;
79         goal.target\_pose.header.frame\_id = \textcolor{stringliteral}{"/odom"};
80         goal.target\_pose.header.stamp = ros::Time::now();
81         tf::poseTFToMsg(targetPose, goal.target\_pose.pose);
82 
83         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"TARGET POSE FORWARD: "} << goal.target\_pose.pose);
84         ros::Duration(10).sleep();
85         this->odomTracker\_->clearPath();
86 
87         geometry\_msgs::PoseStamped currentPoseMsg;
88         currentPoseMsg.header.frame\_id = \textcolor{stringliteral}{"/odom"};
89         currentPoseMsg.header.stamp = ros::Time::now();
90         tf::poseTFToMsg(currentPose, currentPoseMsg.pose);
91         this->odomTracker\_->setStartPoint(currentPoseMsg);
92         this->odomTracker\_->setWorkingMode(
      \hyperlink{namespaceodom__tracker_a4daf27fd157b1a481fdfd6f90de00b88a989d06a586bcf9520889228da7faa643}{odom\_tracker::WorkingMode::RECORD\_PATH\_FORWARD});
93 
94         \hyperlink{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}{moveBaseClient\_}->\hyperlink{classsmacc_1_1ClMoveBaseZ_a712e0df77c9629930e03cbb4c539b485}{plannerSwitcher\_}->setForwardPlanner();
95 
96         \hyperlink{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccActionClientBase_a58c67a87c5fb8ea1633573c58fe3eee1}{sendGoal}(goal);
97     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1CbNavigateForward_a8dd85c804a3d69587d0d6b7a1c4bc6a3_cgraph}
\end{center}
\end{figure}


\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!on\+Exit@{on\+Exit}}
\index{on\+Exit@{on\+Exit}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{on\+Exit() override}{onExit() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::on\+Exit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_abd291ba77cd42537324eb9fbfc44cd22}{}\label{classsm__dance__bot_1_1CbNavigateForward_abd291ba77cd42537324eb9fbfc44cd22}


Reimplemented from \hyperlink{classsmacc_1_1SmaccClientBehavior_ac0cd72d42bd00425362a97c9803ecce5}{smacc\+::\+Smacc\+Client\+Behavior}.



Definition at line 99 of file cb\+\_\+navigate\+\_\+forward.\+h.



References odom\+\_\+tracker\+::\+I\+D\+LE.


\begin{DoxyCode}
100     \{
101         this->odomTracker\_->setWorkingMode(\hyperlink{namespaceodom__tracker_a4daf27fd157b1a481fdfd6f90de00b88aa5daf7f2ebbba4975d61dab1c40188c7}{odom\_tracker::WorkingMode::IDLE});
102     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!forward\+Distance@{forward\+Distance}}
\index{forward\+Distance@{forward\+Distance}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{forward\+Distance}{forwardDistance}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::forward\+Distance}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}{}\label{classsm__dance__bot_1_1CbNavigateForward_a7aa9c05a79d2b0aa0f102ff06f579c07}


Definition at line 15 of file cb\+\_\+navigate\+\_\+forward.\+h.



Referenced by Cb\+Navigate\+Forward(), and on\+Entry().

\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!forward\+Speed@{forward\+Speed}}
\index{forward\+Speed@{forward\+Speed}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{forward\+Speed}{forwardSpeed}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::forward\+Speed}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_af6cff0d1fe09327ce56d35154cf0eb25}{}\label{classsm__dance__bot_1_1CbNavigateForward_af6cff0d1fe09327ce56d35154cf0eb25}


Definition at line 18 of file cb\+\_\+navigate\+\_\+forward.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!listener@{listener}}
\index{listener@{listener}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{listener}{listener}}]{\setlength{\rightskip}{0pt plus 5cm}tf\+::\+Transform\+Listener sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::listener}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_a7bda457757f10a2e71eb15c07bf707b4}{}\label{classsm__dance__bot_1_1CbNavigateForward_a7bda457757f10a2e71eb15c07bf707b4}


Definition at line 20 of file cb\+\_\+navigate\+\_\+forward.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}!move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}}
\index{move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}!sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{move\+Base\+Client\+\_\+}{moveBaseClient_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+::\+Cl\+Move\+BaseZ}$\ast$ sm\+\_\+dance\+\_\+bot\+::\+Cb\+Navigate\+Forward\+::move\+Base\+Client\+\_\+}\hypertarget{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}{}\label{classsm__dance__bot_1_1CbNavigateForward_aa1cd872e92fca83c44ff0430bda061a7}


Definition at line 22 of file cb\+\_\+navigate\+\_\+forward.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+client\+\_\+library/move\+\_\+base\+\_\+z\+\_\+client/move\+\_\+base\+\_\+z\+\_\+client\+\_\+plugin/include/move\+\_\+base\+\_\+z\+\_\+client\+\_\+plugin/client\+\_\+behaviors/\hyperlink{smacc__client__library_2move__base__z__client_2move__base__z__client__plugin_2include_2move__bas3f31d4d52bbf09e30133b849422d4b0f}{cb\+\_\+navigate\+\_\+forward.\+h}\end{DoxyCompactItemize}
