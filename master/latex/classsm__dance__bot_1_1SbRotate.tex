\hypertarget{classsm__dance__bot_1_1SbRotate}{}\section{sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Rotate Class Reference}
\label{classsm__dance__bot_1_1SbRotate}\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}


{\ttfamily \#include $<$sb\+\_\+rotate.\+h$>$}



Inheritance diagram for sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Rotate\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=241pt]{classsm__dance__bot_1_1SbRotate__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Rotate\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1SbRotate__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsm__dance__bot_1_1SbRotate_aedb67014d287510b3742c75bf0eabdf7}{Sb\+Rotate} ()
\item 
\hyperlink{classsm__dance__bot_1_1SbRotate_ac18f0c337926d04e208e5e7fb897980b}{Sb\+Rotate} (float rotate\+\_\+degree)
\item 
virtual void \hyperlink{classsm__dance__bot_1_1SbRotate_a01be8c8a42cc62c70a2a06b539a46e03}{on\+Entry} () override
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
tf\+::\+Transform\+Listener \hyperlink{classsm__dance__bot_1_1SbRotate_ab3fcf762bb8d5a5ada2fa3624403ec66}{listener}
\item 
\hyperlink{classsmacc_1_1SmaccMoveBaseActionClient}{smacc\+::\+Smacc\+Move\+Base\+Action\+Client} $\ast$ \hyperlink{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}{move\+Base\+Client\+\_\+}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}{rotate\+Degree}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 12 of file sb\+\_\+rotate.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!Sb\+Rotate@{Sb\+Rotate}}
\index{Sb\+Rotate@{Sb\+Rotate}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{Sb\+Rotate()}{SbRotate()}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::\+Sb\+Rotate (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1SbRotate_aedb67014d287510b3742c75bf0eabdf7}{}\label{classsm__dance__bot_1_1SbRotate_aedb67014d287510b3742c75bf0eabdf7}


Definition at line 21 of file sb\+\_\+rotate.\+h.


\begin{DoxyCode}
22     \{
23     \}
\end{DoxyCode}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!Sb\+Rotate@{Sb\+Rotate}}
\index{Sb\+Rotate@{Sb\+Rotate}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{Sb\+Rotate(float rotate\+\_\+degree)}{SbRotate(float rotate_degree)}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::\+Sb\+Rotate (
\begin{DoxyParamCaption}
\item[{float}]{rotate\+\_\+degree}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1SbRotate_ac18f0c337926d04e208e5e7fb897980b}{}\label{classsm__dance__bot_1_1SbRotate_ac18f0c337926d04e208e5e7fb897980b}


Definition at line 25 of file sb\+\_\+rotate.\+h.


\begin{DoxyCode}
26     \{
27         \hyperlink{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}{rotateDegree} = rotate\_degree;
28     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!on\+Entry@{on\+Entry}}
\index{on\+Entry@{on\+Entry}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{on\+Entry() override}{onEntry() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::on\+Entry (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classsm__dance__bot_1_1SbRotate_a01be8c8a42cc62c70a2a06b539a46e03}{}\label{classsm__dance__bot_1_1SbRotate_a01be8c8a42cc62c70a2a06b539a46e03}


Reimplemented from \hyperlink{classsmacc_1_1SmaccSubStateBehavior_a47eb8983afa8e1d312873a9a297b84f3}{smacc\+::\+Smacc\+Sub\+State\+Behavior}.



Definition at line 30 of file sb\+\_\+rotate.\+h.



References smacc\+::\+Smacc\+Sub\+State\+Behavior\+::current\+State, smacc\+::\+I\+Smacc\+State\+::param(), smacc\+::\+Smacc\+Move\+Base\+Action\+Client\+::planner\+Switcher\+\_\+, smacc\+::\+Smacc\+Sub\+State\+Behavior\+::requires\+Client(), rotate\+Degree, and smacc\+::\+Smacc\+Action\+Client\+Base$<$ T\+Derived, Action\+Type $>$\+::send\+Goal().


\begin{DoxyCode}
31     \{
32         \textcolor{keywordtype}{double} angle\_increment\_degree;
33 
34         \textcolor{keywordflow}{if} (!\hyperlink{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}{rotateDegree})
35         \{
36             this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a62e2b9da4a446f09396d0b4c01659b88}{currentState}->\hyperlink{classsmacc_1_1ISmaccState_a4982f2187ed6da337462721146e8ef70}{param}(\textcolor{stringliteral}{"angle\_increment\_degree"}, angle\_increment\_degree, 45
      .0);
37         \}
38         \textcolor{keywordflow}{else}
39         \{
40             angle\_increment\_degree = *\hyperlink{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}{rotateDegree};
41         \}
42 
43         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_ae8361a9e794b02f9f3d962b881e4fd7d}{requiresClient}(\hyperlink{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}{moveBaseClient\_});
44 
45         \textcolor{comment}{//this should work better with a coroutine and await}
46         \textcolor{comment}{//this->plannerSwitcher\_->setForwardPlanner();}
47         \hyperlink{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccMoveBaseActionClient_ae24164268108abf0b35cf51bfba5ec67}{plannerSwitcher\_}->setDefaultPlanners();
48 
49         ros::Rate rate(10.0);
50         geometry\_msgs::Pose currentPoseMsg;
51         \textcolor{keywordflow}{while} (ros::ok())
52         \{
53             tf::StampedTransform currentPose;
54             \textcolor{keywordflow}{try}
55             \{
56                 \hyperlink{classsm__dance__bot_1_1SbRotate_ab3fcf762bb8d5a5ada2fa3624403ec66}{listener}.lookupTransform(\textcolor{stringliteral}{"/odom"}, \textcolor{stringliteral}{"/base\_link"},
57                                          ros::Time(0), currentPose);
58 
59                 tf::poseTFToMsg(currentPose, currentPoseMsg);
60                 \textcolor{keywordflow}{break};
61             \}
62             \textcolor{keywordflow}{catch} (tf::TransformException ex)
63             \{
64                 ROS\_ERROR(\textcolor{stringliteral}{"%s"}, ex.what());
65                 ros::Duration(1.0).sleep();
66             \}
67         \}
68 
69         smacc::SmaccMoveBaseActionClient::Goal goal;
70         goal.target\_pose.header.frame\_id = \textcolor{stringliteral}{"/odom"};
71         goal.target\_pose.header.stamp = ros::Time::now();
72 
73         \textcolor{keyword}{auto} currentAngle = tf::getYaw(currentPoseMsg.orientation);
74         \textcolor{keyword}{auto} targetAngle = currentAngle + angle\_increment\_degree * M\_PI / 180.0;
75         goal.target\_pose.pose.position = currentPoseMsg.position;
76         goal.target\_pose.pose.orientation = tf::createQuaternionMsgFromYaw(targetAngle);
77 
78         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"current pose: "} << currentPoseMsg);
79         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"goal pose: "} << goal.target\_pose.pose);
80         \hyperlink{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccActionClientBase_a2ec9e5fb96ecc517a815cda209eb1b51}{sendGoal}(goal);
81     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1SbRotate_a01be8c8a42cc62c70a2a06b539a46e03_cgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!listener@{listener}}
\index{listener@{listener}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{listener}{listener}}]{\setlength{\rightskip}{0pt plus 5cm}tf\+::\+Transform\+Listener sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::listener}\hypertarget{classsm__dance__bot_1_1SbRotate_ab3fcf762bb8d5a5ada2fa3624403ec66}{}\label{classsm__dance__bot_1_1SbRotate_ab3fcf762bb8d5a5ada2fa3624403ec66}


Definition at line 15 of file sb\+\_\+rotate.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}}
\index{move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{move\+Base\+Client\+\_\+}{moveBaseClient_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+::\+Smacc\+Move\+Base\+Action\+Client}$\ast$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::move\+Base\+Client\+\_\+}\hypertarget{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}{}\label{classsm__dance__bot_1_1SbRotate_a7b8658c9d207a3b88c97d77f718bd4ad}


Definition at line 17 of file sb\+\_\+rotate.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}!rotate\+Degree@{rotate\+Degree}}
\index{rotate\+Degree@{rotate\+Degree}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate}}
\subsubsection[{\texorpdfstring{rotate\+Degree}{rotateDegree}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Rotate\+::rotate\+Degree}\hypertarget{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}{}\label{classsm__dance__bot_1_1SbRotate_a43e1c845c2cd8f5ba2fbcc03abc91d34}


Definition at line 19 of file sb\+\_\+rotate.\+h.



Referenced by on\+Entry().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+dance\+\_\+bot/include/sm\+\_\+dance\+\_\+bot/substate\+\_\+behaviors/navigation/\hyperlink{sb__rotate_8h}{sb\+\_\+rotate.\+h}\end{DoxyCompactItemize}
