\hypertarget{classsm__dance__bot_1_1SbNavigateForward}{}\section{sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Navigate\+Forward Class Reference}
\label{classsm__dance__bot_1_1SbNavigateForward}\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}


{\ttfamily \#include $<$sb\+\_\+navigate\+\_\+forward.\+h$>$}



Inheritance diagram for sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Navigate\+Forward\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classsm__dance__bot_1_1SbNavigateForward__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for sm\+\_\+dance\+\_\+bot\+:\+:Sb\+Navigate\+Forward\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1SbNavigateForward__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ad82612da6d53530a94662e9710bfe8f0}{Sb\+Navigate\+Forward} (float \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forward\+Distance})
\item 
\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ad6326b453349f497ce280202d073c840}{Sb\+Navigate\+Forward} ()
\item 
virtual void \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a22ac871fbf5adff4576e46e48211dfb1}{on\+Entry} () override
\item 
virtual void \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a0d61710d752b2e6f07bc2a33a67c19d0}{on\+Exit} () override
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forward\+Distance}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classsm__dance__bot_1_1SbNavigateForward_ac0bc4c5bbc1f76d84301f33f16743ef6}{forward\+Speed}
\item 
tf\+::\+Transform\+Listener \hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab27255d8f6ae1320acda4fdb092f0df3}{listener}
\item 
\hyperlink{classsmacc_1_1SmaccMoveBaseActionClient}{smacc\+::\+Smacc\+Move\+Base\+Action\+Client} $\ast$ \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}{move\+Base\+Client\+\_\+}
\item 
\hyperlink{classsmacc__odom__tracker_1_1OdomTracker}{smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker} $\ast$ \hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odom\+Tracker\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 12 of file sb\+\_\+navigate\+\_\+forward.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!Sb\+Navigate\+Forward@{Sb\+Navigate\+Forward}}
\index{Sb\+Navigate\+Forward@{Sb\+Navigate\+Forward}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{Sb\+Navigate\+Forward(float forward\+Distance)}{SbNavigateForward(float forwardDistance)}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::\+Sb\+Navigate\+Forward (
\begin{DoxyParamCaption}
\item[{float}]{forward\+Distance}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_ad82612da6d53530a94662e9710bfe8f0}{}\label{classsm__dance__bot_1_1SbNavigateForward_ad82612da6d53530a94662e9710bfe8f0}


Definition at line 26 of file sb\+\_\+navigate\+\_\+forward.\+h.



References forward\+Distance.


\begin{DoxyCode}
27     \{
28         this->\hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forwardDistance} = \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forwardDistance};
29     \}
\end{DoxyCode}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!Sb\+Navigate\+Forward@{Sb\+Navigate\+Forward}}
\index{Sb\+Navigate\+Forward@{Sb\+Navigate\+Forward}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{Sb\+Navigate\+Forward()}{SbNavigateForward()}}]{\setlength{\rightskip}{0pt plus 5cm}sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::\+Sb\+Navigate\+Forward (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_ad6326b453349f497ce280202d073c840}{}\label{classsm__dance__bot_1_1SbNavigateForward_ad6326b453349f497ce280202d073c840}


Definition at line 31 of file sb\+\_\+navigate\+\_\+forward.\+h.


\begin{DoxyCode}
32     \{
33     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!on\+Entry@{on\+Entry}}
\index{on\+Entry@{on\+Entry}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{on\+Entry() override}{onEntry() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::on\+Entry (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_a22ac871fbf5adff4576e46e48211dfb1}{}\label{classsm__dance__bot_1_1SbNavigateForward_a22ac871fbf5adff4576e46e48211dfb1}


Reimplemented from \hyperlink{classsmacc_1_1SmaccSubStateBehavior_a47eb8983afa8e1d312873a9a297b84f3}{smacc\+::\+Smacc\+Sub\+State\+Behavior}.



Definition at line 35 of file sb\+\_\+navigate\+\_\+forward.\+h.



References smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::clear\+Path(), smacc\+::\+Smacc\+Sub\+State\+Behavior\+::current\+State, forward\+Distance, smacc\+::\+I\+Smacc\+State\+::param(), smacc\+::\+Smacc\+Move\+Base\+Action\+Client\+::planner\+Switcher\+\_\+, smacc\+\_\+odom\+\_\+tracker\+::\+R\+E\+C\+O\+R\+D\+\_\+\+P\+A\+T\+H\+\_\+\+F\+O\+R\+W\+A\+RD, smacc\+::\+Smacc\+Sub\+State\+Behavior\+::requires\+Client(), smacc\+::\+Smacc\+Sub\+State\+Behavior\+::requires\+Component(), smacc\+::\+Smacc\+Action\+Client\+Base$<$ T\+Derived, Action\+Type $>$\+::send\+Goal(), smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Start\+Point(), and smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Working\+Mode().


\begin{DoxyCode}
36     \{
37         \textcolor{comment}{// straight motion distance}
38         \textcolor{keywordtype}{double} dist;
39 
40         \textcolor{keywordflow}{if} (!\hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forwardDistance})
41         \{
42             this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a62e2b9da4a446f09396d0b4c01659b88}{currentState}->\hyperlink{classsmacc_1_1ISmaccState_a4982f2187ed6da337462721146e8ef70}{param}(\textcolor{stringliteral}{"straight\_motion\_distance"}, dist, 3.5);
43         \}
44         \textcolor{keywordflow}{else}
45         \{
46             dist = *\hyperlink{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{forwardDistance};
47         \}
48 
49         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Straight motion distance: "} << dist);
50 
51         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_ae8361a9e794b02f9f3d962b881e4fd7d}{requiresClient}(\hyperlink{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}{moveBaseClient\_});
52         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a9f31f62f886cc06017e92fa0d834b12d}{requiresComponent}(\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odomTracker\_});
53 
54         \textcolor{comment}{//this should work better with a coroutine and await}
55         ros::Rate rate(10.0);
56         tf::StampedTransform currentPose;
57 
58         \textcolor{keywordflow}{while} (ros::ok())
59         \{
60             \textcolor{keywordflow}{try}
61             \{
62                 \hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab27255d8f6ae1320acda4fdb092f0df3}{listener}.lookupTransform(\textcolor{stringliteral}{"/odom"}, \textcolor{stringliteral}{"/base\_link"},
63                                          ros::Time(0), currentPose);
64 
65                 \textcolor{keywordflow}{break};
66             \}
67             \textcolor{keywordflow}{catch} (tf::TransformException ex)
68             \{
69                 ROS\_ERROR(\textcolor{stringliteral}{"%s"}, ex.what());
70                 ros::Duration(1.0).sleep();
71             \}
72         \}
73 
74         tf::Transform forwardDeltaTransform;
75         forwardDeltaTransform.setIdentity();
76         forwardDeltaTransform.setOrigin(tf::Vector3(dist, 0, 0));
77 
78         tf::Transform targetPose = currentPose * forwardDeltaTransform;
79 
80         smacc::SmaccMoveBaseActionClient::Goal goal;
81         goal.target\_pose.header.frame\_id = \textcolor{stringliteral}{"/odom"};
82         goal.target\_pose.header.stamp = ros::Time::now();
83         tf::poseTFToMsg(targetPose, goal.target\_pose.pose);
84 
85         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"TARGET POSE FORWARD: "} << goal.target\_pose.pose);
86         ros::Duration(10).sleep();
87         this->\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a81ef228f0c2659e1bf9f8fdcb03fc7ae}{clearPath}();
88 
89         geometry\_msgs::PoseStamped currentPoseMsg;
90         currentPoseMsg.header.frame\_id = \textcolor{stringliteral}{"/odom"};
91         currentPoseMsg.header.stamp = ros::Time::now();
92         tf::poseTFToMsg(currentPose, currentPoseMsg.pose);
93         this->\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a5ac7c4770b3e29b74571ef65377048ee}{setStartPoint}(currentPoseMsg);
94         this->\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a38fbca999297c46dc95628cc60851a45}{setWorkingMode}(
      \hyperlink{namespacesmacc__odom__tracker_ade9730dd5cc10ccfad9362176cf46c33a989d06a586bcf9520889228da7faa643}{smacc\_odom\_tracker::WorkingMode::RECORD\_PATH\_FORWARD});
95 
96         \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccMoveBaseActionClient_ae24164268108abf0b35cf51bfba5ec67}{plannerSwitcher\_}->setForwardPlanner();
97 
98         \hyperlink{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccActionClientBase_a2ec9e5fb96ecc517a815cda209eb1b51}{sendGoal}(goal);
99     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1SbNavigateForward_a22ac871fbf5adff4576e46e48211dfb1_cgraph}
\end{center}
\end{figure}


\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!on\+Exit@{on\+Exit}}
\index{on\+Exit@{on\+Exit}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{on\+Exit() override}{onExit() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::on\+Exit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_a0d61710d752b2e6f07bc2a33a67c19d0}{}\label{classsm__dance__bot_1_1SbNavigateForward_a0d61710d752b2e6f07bc2a33a67c19d0}


Reimplemented from \hyperlink{classsmacc_1_1SmaccSubStateBehavior_afaeb44666136c5ae47a53dde89fa5d31}{smacc\+::\+Smacc\+Sub\+State\+Behavior}.



Definition at line 101 of file sb\+\_\+navigate\+\_\+forward.\+h.



References smacc\+\_\+odom\+\_\+tracker\+::\+I\+D\+LE, and smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Working\+Mode().


\begin{DoxyCode}
102     \{
103         this->\hyperlink{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a38fbca999297c46dc95628cc60851a45}{setWorkingMode}(
      \hyperlink{namespacesmacc__odom__tracker_ade9730dd5cc10ccfad9362176cf46c33aa5daf7f2ebbba4975d61dab1c40188c7}{smacc\_odom\_tracker::WorkingMode::IDLE});
104     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classsm__dance__bot_1_1SbNavigateForward_a0d61710d752b2e6f07bc2a33a67c19d0_cgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!forward\+Distance@{forward\+Distance}}
\index{forward\+Distance@{forward\+Distance}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{forward\+Distance}{forwardDistance}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::forward\+Distance}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}{}\label{classsm__dance__bot_1_1SbNavigateForward_a2b828c7cd081219448112a2161a62aab}


Definition at line 15 of file sb\+\_\+navigate\+\_\+forward.\+h.



Referenced by on\+Entry(), and Sb\+Navigate\+Forward().

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!forward\+Speed@{forward\+Speed}}
\index{forward\+Speed@{forward\+Speed}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{forward\+Speed}{forwardSpeed}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::forward\+Speed}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_ac0bc4c5bbc1f76d84301f33f16743ef6}{}\label{classsm__dance__bot_1_1SbNavigateForward_ac0bc4c5bbc1f76d84301f33f16743ef6}


Definition at line 18 of file sb\+\_\+navigate\+\_\+forward.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!listener@{listener}}
\index{listener@{listener}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{listener}{listener}}]{\setlength{\rightskip}{0pt plus 5cm}tf\+::\+Transform\+Listener sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::listener}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_ab27255d8f6ae1320acda4fdb092f0df3}{}\label{classsm__dance__bot_1_1SbNavigateForward_ab27255d8f6ae1320acda4fdb092f0df3}


Definition at line 20 of file sb\+\_\+navigate\+\_\+forward.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}}
\index{move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{move\+Base\+Client\+\_\+}{moveBaseClient_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+::\+Smacc\+Move\+Base\+Action\+Client}$\ast$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::move\+Base\+Client\+\_\+}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}{}\label{classsm__dance__bot_1_1SbNavigateForward_a968e1e81e922971fbb7b658e644ce36f}


Definition at line 22 of file sb\+\_\+navigate\+\_\+forward.\+h.

\index{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}!odom\+Tracker\+\_\+@{odom\+Tracker\+\_\+}}
\index{odom\+Tracker\+\_\+@{odom\+Tracker\+\_\+}!sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward@{sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward}}
\subsubsection[{\texorpdfstring{odom\+Tracker\+\_\+}{odomTracker_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker}$\ast$ sm\+\_\+dance\+\_\+bot\+::\+Sb\+Navigate\+Forward\+::odom\+Tracker\+\_\+}\hypertarget{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}{}\label{classsm__dance__bot_1_1SbNavigateForward_ab52cc8f5bf6478324a4d3cc42a03a869}


Definition at line 24 of file sb\+\_\+navigate\+\_\+forward.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+sm\+\_\+reference\+\_\+library/sm\+\_\+dance\+\_\+bot/include/sm\+\_\+dance\+\_\+bot/substate\+\_\+behaviors/navigation/\hyperlink{sb__navigate__forward_8h}{sb\+\_\+navigate\+\_\+forward.\+h}\end{DoxyCompactItemize}
