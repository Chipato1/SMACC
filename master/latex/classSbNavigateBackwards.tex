\hypertarget{classSbNavigateBackwards}{}\section{Sb\+Navigate\+Backwards Class Reference}
\label{classSbNavigateBackwards}\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}


{\ttfamily \#include $<$sb\+\_\+navigate\+\_\+backward.\+h$>$}



Inheritance diagram for Sb\+Navigate\+Backwards\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=254pt]{classSbNavigateBackwards__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Sb\+Navigate\+Backwards\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSbNavigateBackwards__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSbNavigateBackwards_ae4e79eeac0dac325a4334445dfe1afc1}{Sb\+Navigate\+Backwards} (float \hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backward\+Distance})
\item 
\hyperlink{classSbNavigateBackwards_a2d0b3a241987236b79d0152ac208aa87}{Sb\+Navigate\+Backwards} ()
\item 
virtual void \hyperlink{classSbNavigateBackwards_a59b7bc4f0b714f548c73659c87dd405e}{on\+Entry} () override
\item 
virtual \hyperlink{classbool}{bool} \hyperlink{classSbNavigateBackwards_afc23bccc5d951e064bd8a9283934e7ec}{on\+Exit} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backward\+Distance}
\item 
boost\+::optional$<$ float $>$ \hyperlink{classSbNavigateBackwards_a011e358beaab0f8f7fbd74f292b26c43}{backward\+Speed}
\item 
tf\+::\+Transform\+Listener \hyperlink{classSbNavigateBackwards_a23f881d6f742d683a2f6b671c21688cc}{listener}
\item 
\hyperlink{classsmacc_1_1SmaccMoveBaseActionClient}{smacc\+::\+Smacc\+Move\+Base\+Action\+Client} $\ast$ \hyperlink{classSbNavigateBackwards_a7e46b20eb07e60685a5b88b12b341fd8}{move\+Base\+Client\+\_\+}
\item 
\hyperlink{classsmacc__odom__tracker_1_1OdomTracker}{smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker} $\ast$ \hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odom\+Tracker\+\_\+}
\item 
\hyperlink{classsmacc__planner__switcher_1_1PlannerSwitcher}{smacc\+\_\+planner\+\_\+switcher\+::\+Planner\+Switcher} $\ast$ \hyperlink{classSbNavigateBackwards_a941dc2026876a1d8c35818c6feac768a}{planner\+Switcher\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 10 of file sb\+\_\+navigate\+\_\+backward.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{Sb\+Navigate\+Backwards(float backward\+Distance)}{SbNavigateBackwards(float backwardDistance)}}]{\setlength{\rightskip}{0pt plus 5cm}Sb\+Navigate\+Backwards\+::\+Sb\+Navigate\+Backwards (
\begin{DoxyParamCaption}
\item[{float}]{backward\+Distance}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classSbNavigateBackwards_ae4e79eeac0dac325a4334445dfe1afc1}{}\label{classSbNavigateBackwards_ae4e79eeac0dac325a4334445dfe1afc1}


Definition at line 26 of file sb\+\_\+navigate\+\_\+backward.\+h.



References backward\+Distance.


\begin{DoxyCode}
27     \{
28         \textcolor{keywordflow}{if}(\hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance} <0 )
29         \{
30             ROS\_ERROR(\textcolor{stringliteral}{"sb backward: distance must be greater or equal than 0"});
31             this->\hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance} = 0;
32         \}
33         this->\hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance} = \hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance};
34     \}
\end{DoxyCode}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{Sb\+Navigate\+Backwards()}{SbNavigateBackwards()}}]{\setlength{\rightskip}{0pt plus 5cm}Sb\+Navigate\+Backwards\+::\+Sb\+Navigate\+Backwards (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classSbNavigateBackwards_a2d0b3a241987236b79d0152ac208aa87}{}\label{classSbNavigateBackwards_a2d0b3a241987236b79d0152ac208aa87}


Definition at line 36 of file sb\+\_\+navigate\+\_\+backward.\+h.


\begin{DoxyCode}
37     \{
38     \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!on\+Entry@{on\+Entry}}
\index{on\+Entry@{on\+Entry}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{on\+Entry() override}{onEntry() override}}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Sb\+Navigate\+Backwards\+::on\+Entry (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\hypertarget{classSbNavigateBackwards_a59b7bc4f0b714f548c73659c87dd405e}{}\label{classSbNavigateBackwards_a59b7bc4f0b714f548c73659c87dd405e}


Reimplemented from \hyperlink{classsmacc_1_1SmaccSubStateBehavior_a7c28e1c46238bbb2c2e0450573c6de94}{smacc\+::\+Smacc\+Sub\+State\+Behavior}.



Definition at line 40 of file sb\+\_\+navigate\+\_\+backward.\+h.



References backward\+Distance, smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::clear\+Path(), smacc\+::\+Smacc\+Sub\+State\+Behavior\+::current\+State, smacc\+::\+I\+Smacc\+State\+::param(), smacc\+\_\+odom\+\_\+tracker\+::\+R\+E\+C\+O\+R\+D\+\_\+\+P\+A\+T\+H\+\_\+\+F\+O\+R\+W\+A\+RD, smacc\+::\+Smacc\+Sub\+State\+Behavior\+::requires\+Component(), smacc\+::\+Smacc\+Action\+Client\+Base$<$ Action\+Type $>$\+::send\+Goal(), smacc\+\_\+planner\+\_\+switcher\+::\+Planner\+Switcher\+::set\+Backward\+Planner(), smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Start\+Point(), and smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Working\+Mode().


\begin{DoxyCode}
41     \{
42         \textcolor{comment}{// straight motion distance}
43         \textcolor{keywordtype}{double} dist;
44 
45         \textcolor{keywordflow}{if} (!\hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance})
46         \{
47             this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a62e2b9da4a446f09396d0b4c01659b88}{currentState}->\hyperlink{classsmacc_1_1ISmaccState_a4982f2187ed6da337462721146e8ef70}{param}(\textcolor{stringliteral}{"straight\_motion\_distance"}, dist, 3.5);
48         \}
49         \textcolor{keywordflow}{else}
50         \{
51             dist = *\hyperlink{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{backwardDistance};
52         \}
53 
54         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"Straight motion distance: "} << dist);
55 
56         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a4d25c4ba8ec01c489df172a71bb1c37d}{requiresComponent}(\hyperlink{classSbNavigateBackwards_a7e46b20eb07e60685a5b88b12b341fd8}{moveBaseClient\_}, ros::NodeHandle(\textcolor{stringliteral}{"move\_base
      "}));
57         
58         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a4d25c4ba8ec01c489df172a71bb1c37d}{requiresComponent}(\hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odomTracker\_});
59         this->\hyperlink{classsmacc_1_1SmaccSubStateBehavior_a4d25c4ba8ec01c489df172a71bb1c37d}{requiresComponent}(\hyperlink{classSbNavigateBackwards_a941dc2026876a1d8c35818c6feac768a}{plannerSwitcher\_}, ros::NodeHandle(\textcolor{stringliteral}{"
      move\_base"}));
60 
61         \textcolor{comment}{//this should work better with a coroutine and await}
62         ros::Rate rate(10.0);
63         tf::StampedTransform currentPose;
64 
65         \textcolor{keywordflow}{while} (ros::ok())
66         \{
67             \textcolor{keywordflow}{try}
68             \{
69                 \hyperlink{classSbNavigateBackwards_a23f881d6f742d683a2f6b671c21688cc}{listener}.lookupTransform(\textcolor{stringliteral}{"/odom"}, \textcolor{stringliteral}{"/base\_link"}, 
70                                          ros::Time(0), currentPose);
71 
72                 \textcolor{keywordflow}{break};
73             \}
74             \textcolor{keywordflow}{catch} (tf::TransformException ex)
75             \{
76                 ROS\_ERROR(\textcolor{stringliteral}{"%s"}, ex.what());
77                 ros::Duration(1.0).sleep();
78             \}
79         \}
80 
81         tf::Transform forwardDeltaTransform;
82         forwardDeltaTransform.setIdentity();
83         forwardDeltaTransform.setOrigin(tf::Vector3(-dist, 0, 0));
84 
85         tf::Transform targetPose = currentPose * forwardDeltaTransform;
86 
87         smacc::SmaccMoveBaseActionClient::Goal goal;
88         goal.target\_pose.header.frame\_id = \textcolor{stringliteral}{"/odom"};
89         goal.target\_pose.header.stamp = ros::Time::now();
90         tf::poseTFToMsg(targetPose, goal.target\_pose.pose);
91 
92         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"TARGET POSE FORWARD: "} << goal.target\_pose.pose);
93         ros::Duration(10).sleep();
94         this->\hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a81ef228f0c2659e1bf9f8fdcb03fc7ae}{clearPath}();
95 
96         geometry\_msgs::PoseStamped currentPoseMsg;
97         currentPoseMsg.header.frame\_id = \textcolor{stringliteral}{"/odom"};
98         currentPoseMsg.header.stamp = ros::Time::now();
99         tf::poseTFToMsg(currentPose, currentPoseMsg.pose);
100         this->\hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a5ac7c4770b3e29b74571ef65377048ee}{setStartPoint}(currentPoseMsg);
101         this->\hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a38fbca999297c46dc95628cc60851a45}{setWorkingMode}(
      \hyperlink{namespacesmacc__odom__tracker_ade9730dd5cc10ccfad9362176cf46c33a989d06a586bcf9520889228da7faa643}{smacc\_odom\_tracker::WorkingMode::RECORD\_PATH\_FORWARD});
102 
103         this->\hyperlink{classSbNavigateBackwards_a941dc2026876a1d8c35818c6feac768a}{plannerSwitcher\_}->\hyperlink{classsmacc__planner__switcher_1_1PlannerSwitcher_a848558a4309a42c546ab87e65722da2f}{setBackwardPlanner}();
104 
105         \hyperlink{classSbNavigateBackwards_a7e46b20eb07e60685a5b88b12b341fd8}{moveBaseClient\_}->\hyperlink{classsmacc_1_1SmaccActionClientBase_a58c67a87c5fb8ea1633573c58fe3eee1}{sendGoal}(goal);
106     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSbNavigateBackwards_a59b7bc4f0b714f548c73659c87dd405e_cgraph}
\end{center}
\end{figure}


\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!on\+Exit@{on\+Exit}}
\index{on\+Exit@{on\+Exit}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{on\+Exit()}{onExit()}}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf bool} Sb\+Navigate\+Backwards\+::on\+Exit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\hypertarget{classSbNavigateBackwards_afc23bccc5d951e064bd8a9283934e7ec}{}\label{classSbNavigateBackwards_afc23bccc5d951e064bd8a9283934e7ec}


Reimplemented from \hyperlink{classsmacc_1_1SmaccSubStateBehavior_ab78b9de76c04a7ab6c16d5924e216ef9}{smacc\+::\+Smacc\+Sub\+State\+Behavior}.



Definition at line 108 of file sb\+\_\+navigate\+\_\+backward.\+h.



References smacc\+\_\+odom\+\_\+tracker\+::\+I\+D\+LE, and smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker\+::set\+Working\+Mode().


\begin{DoxyCode}
109     \{
110         this->\hyperlink{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{odomTracker\_}->\hyperlink{classsmacc__odom__tracker_1_1OdomTracker_a38fbca999297c46dc95628cc60851a45}{setWorkingMode}(
      \hyperlink{namespacesmacc__odom__tracker_ade9730dd5cc10ccfad9362176cf46c33aa5daf7f2ebbba4975d61dab1c40188c7}{smacc\_odom\_tracker::WorkingMode::IDLE});
111     \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSbNavigateBackwards_afc23bccc5d951e064bd8a9283934e7ec_cgraph}
\end{center}
\end{figure}




\subsection{Member Data Documentation}
\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!backward\+Distance@{backward\+Distance}}
\index{backward\+Distance@{backward\+Distance}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{backward\+Distance}{backwardDistance}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ Sb\+Navigate\+Backwards\+::backward\+Distance}\hypertarget{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}{}\label{classSbNavigateBackwards_ad7e0e6b09dae085c1106335e208d6e84}


Definition at line 13 of file sb\+\_\+navigate\+\_\+backward.\+h.



Referenced by on\+Entry(), and Sb\+Navigate\+Backwards().

\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!backward\+Speed@{backward\+Speed}}
\index{backward\+Speed@{backward\+Speed}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{backward\+Speed}{backwardSpeed}}]{\setlength{\rightskip}{0pt plus 5cm}boost\+::optional$<$float$>$ Sb\+Navigate\+Backwards\+::backward\+Speed}\hypertarget{classSbNavigateBackwards_a011e358beaab0f8f7fbd74f292b26c43}{}\label{classSbNavigateBackwards_a011e358beaab0f8f7fbd74f292b26c43}


Definition at line 16 of file sb\+\_\+navigate\+\_\+backward.\+h.

\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!listener@{listener}}
\index{listener@{listener}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{listener}{listener}}]{\setlength{\rightskip}{0pt plus 5cm}tf\+::\+Transform\+Listener Sb\+Navigate\+Backwards\+::listener}\hypertarget{classSbNavigateBackwards_a23f881d6f742d683a2f6b671c21688cc}{}\label{classSbNavigateBackwards_a23f881d6f742d683a2f6b671c21688cc}


Definition at line 18 of file sb\+\_\+navigate\+\_\+backward.\+h.

\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}}
\index{move\+Base\+Client\+\_\+@{move\+Base\+Client\+\_\+}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{move\+Base\+Client\+\_\+}{moveBaseClient_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+::\+Smacc\+Move\+Base\+Action\+Client}$\ast$ Sb\+Navigate\+Backwards\+::move\+Base\+Client\+\_\+}\hypertarget{classSbNavigateBackwards_a7e46b20eb07e60685a5b88b12b341fd8}{}\label{classSbNavigateBackwards_a7e46b20eb07e60685a5b88b12b341fd8}


Definition at line 20 of file sb\+\_\+navigate\+\_\+backward.\+h.

\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!odom\+Tracker\+\_\+@{odom\+Tracker\+\_\+}}
\index{odom\+Tracker\+\_\+@{odom\+Tracker\+\_\+}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{odom\+Tracker\+\_\+}{odomTracker_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+\_\+odom\+\_\+tracker\+::\+Odom\+Tracker}$\ast$ Sb\+Navigate\+Backwards\+::odom\+Tracker\+\_\+}\hypertarget{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}{}\label{classSbNavigateBackwards_a570fa48348a172b3db7bcb5f486017b1}


Definition at line 22 of file sb\+\_\+navigate\+\_\+backward.\+h.

\index{Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}!planner\+Switcher\+\_\+@{planner\+Switcher\+\_\+}}
\index{planner\+Switcher\+\_\+@{planner\+Switcher\+\_\+}!Sb\+Navigate\+Backwards@{Sb\+Navigate\+Backwards}}
\subsubsection[{\texorpdfstring{planner\+Switcher\+\_\+}{plannerSwitcher_}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf smacc\+\_\+planner\+\_\+switcher\+::\+Planner\+Switcher}$\ast$ Sb\+Navigate\+Backwards\+::planner\+Switcher\+\_\+}\hypertarget{classSbNavigateBackwards_a941dc2026876a1d8c35818c6feac768a}{}\label{classSbNavigateBackwards_a941dc2026876a1d8c35818c6feac768a}


Definition at line 24 of file sb\+\_\+navigate\+\_\+backward.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
smacc\+\_\+sm\+\_\+examples/sm\+\_\+dance\+\_\+bot/include/sm\+\_\+dance\+\_\+bot/substate\+\_\+behaviors/navigation/\hyperlink{sb__navigate__backward_8h}{sb\+\_\+navigate\+\_\+backward.\+h}\end{DoxyCompactItemize}
